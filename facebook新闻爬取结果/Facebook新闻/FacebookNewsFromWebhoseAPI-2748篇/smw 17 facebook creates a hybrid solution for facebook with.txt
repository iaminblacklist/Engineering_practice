Tweet 
"We've put a capture and a production studio in the palm of your hand," said Nick Ruff, a software engineer on Facebook's video infrastructure team, delivering the second day keynote address at Streaming Media West 2017. Ruff took attendees deep into Facebook Live, the live video streaming platform that, while still young, has already become a daily habit for many businesses and individuals. 
Ruff started by explaining the Live API, which allows businesses and brands to avoid the limitations of broadcasting over a Wi-Fi or cellular network. Using the Live API, companies can use professional cameras and stream directly to Facebook's servers, gaining more control over their stream and bitrate. 
"Itâ€™s the ability to stream directly to our server and take advantage of our distribution network," Ruff said. 
Facebook has been quick to upgrade its video offerings, and one new feature in the Live API is the ability to schedule live events. This lets companies collect an audience before starting a broadcast. The new Live 360 feature lets the broadcaster create immersive videos where viewers can pan around and explore. It also supports streams from drones. 
Ruff took Streaming Media West under-the-hood as he explained the new Live With feature. In Live With, a live broadcaster can pull a second person into a one-to-one discussion which is then broadcast to viewers. It's available to all Facebook members. 
For Facebook With, the big problem to solve was latency. Conversations need to seem like they're taking place in the same room, even when the two parties are across the globe. "If it was even a few seconds latency it would be too slow," Ruff said. 
Facebook uses RTMP broadcasting in its live video API, since it's optimized for the continuity of the stream and supports buffering. RTMP lets broadcasters adjust the encoding quality, but comes with too much latency for Live With, which demand 500 ms latency or better. The engineering team looked at RTC broadcasting, which is used in video calling. RTC assures low latency by dropping frames to avoid buffer delays. "Frame dropping is really a feature, not a bug, in this case," Ruff said. 
However, neither option was strong enough for Facebook With, which demanded both strong video quality and low latency. To achieve that, Facebook created a hybrid approach. All Facebook Live streams start in RTMP, but the infrastructure changes when a guest is added. In order to support low latency person-to-person video calls which can then be broadcast to millions of viewers, Facebook created a new element called the Compositor Service. This piece creates a composited RTMP stream when is then sent to the Facebook Live server 
Compositor Service takes the RTMP streams from the live stream's host and guest and passes them through a jitter buffer, then a decoder, compositor, encoder, and muxer, before finally creating the composited RTMP stream. Viewers can watch the two-person stream with a picture-in-picture, landscape, or vertical view. 
Figures such as Kevin Hart and Oprah Winfrey have used Live With to communicate with fans. Reporters can use it in the field to answer reader questions. 
"It's a really authentic, kind of raw way to connect with your fan base," Ruff said. 
Nick Ruff at Streaming Media West 2017 Page 1